# アプリケーションの基礎

AndroidアプリはJavaプログラミング言語で記述されています。Android SDKツールは、データやリソース ファイルとともに、コードをAPK（Androidパッケージ）にコンパイルします。これは、.apkという接尾語の付いたアーカイブ ファイルです。1つのAPKファイルにはAndroidアプリのすべてのコンテンツが含まれており、Android端末はアプリをインストールする際にこのファイルを使用します。

端末にインストールすると、各Androidアプリはそれぞれのセキュリティ サンドボックス内で動作します。

* Androidオペレーティング システムはマルチ ユーザーのLinuxシステムであり、各アプリが異なるユーザーになります。

* デフォルトで、システムは各アプリに一意のLinuxユーザーIDを割り当てます（IDはシステムのみが使用し、アプリはIDを関知しません）。アプリが割り当てられたユーザーIDのみがアプリ内のすべてのファイルにアクセスできるよう、システムがパーミッションを設定します。

* 各プロセスにはそれぞれ独自の仮想マシン（VM）があるため、アプリのコードは他のアプリとは分離して実行します。

* デフォルトで、すべてのアプリは独自のLinuxプロセス上で実行します。Androidはアプリのコンポーネントのいずれかを実行する必要があるときにプロセスを開始し、それが必要なくなったときや、システムが他のアプリ用にメモリを回復させる必要があるときにプロセスをシャットダウンします。

このようにして、Androidシステムは最小権限の原則を実装しています。つまり、デフォルトでは各アプリにはコンポーネントの動作に必要な分だけのアクセス権が与えられます。これにより、パーミッションの与えられていないシステムの一部にアプリはアクセスできないという非常に安全性の高い環境が作り出されます。

ただし、アプリが他のアプリとデータを共有したり、システムのサービスにアクセスしたりする方法もあります。

* 2つのアプリで同じのLinuxユーザーIDを共有して、お互いのファイルにアクセスできるようにすることも可能です。システム リソースを節約するため、同じユーザーIDを持つアプリを同じLinuxプロセス上で実行し、同じVMを共有するよう設定することもできます（アプリを同じ証明書で署名する必要があります）。

* アプリから、ユーザーの連絡先、SMSメッセージ、マウント可能なストレージ（SDカード）、カメラ、Bluetoothといった端末データにアクセスするためのパーミッションを要求できます。ユーザーはこれらのパーミッションを明示的に付与必要があります。詳細については、システム パーミッションの使用をご覧ください。

以上が、システム内のAndroidアプリの基本的な仕組みです。続いて、このドキュメントでは次の内容について説明します。

* アプリを定義するコア フレームワーク コンポーネント。

* コンポーネントを宣言し、アプリの端末機能に必要なマニフェスト ファイル。

* アプリで様々な端末構成の動作を最適化できるようにする。アプリコードから分離されたリソース。

## アプリのコンポーネント

アプリのコンポーネントは、Androidアプリに不可欠な構成要素です。各コンポーネントは、システムがアプリにアクセスするための様々なエントリ ポイントになります。すべてのコンポーネントがユーザーの実際のエントリ ポイントになるわけではなく、中にはお互いに依存関係にあるものもありますが、それぞれが独自のエンティティとして存在し、特定の役割を担っています。各コンポーネントはアプリの全体的な動作を定義する固有の構成要素です。

アプリのコンポーネントには、4つのタイプがあります。それぞれのタイプは、まったく異なる目的を果たし、コンポーネントの作成や放棄方法を定義するライフサイクルもそれぞれ異なります。

アプリのコンポーネントのタイプは次の4つです。

### アクティビティ

アクティビティは1つのユーザー インターフェースで1つの画面を表すものです。たとえば、メール アプリには新着メールの一覧を表示する1つのアクティビティと、メールを作成するアクティビティ、メールを閲覧するアクティビティがそれぞれ別にあります。メール アプリでは、複数のアクティビティが一体となって結合したユーザー操作を実現しますが、それぞれは他のものから独立しています。それにより、別のアプリで複数のアクティビティの中から、1つのアクティビティを開始できるようになります（メール アプリが許可している場合）。たとえば、カメラ アプリでが写真を他のユーザーと共有するために、メール アプリの新規メールを作成するアクティビティを開始できます。

アクティビティはActivityのサブクラスとして実装されます。詳細については、デベロッパー ガイドのアクティビティをご覧ください。

### サービス

サービスは、長期間の操作やリモート プロセスを処理するためにバック グラウンドで動作するコンポーネントです。サービスは、ユーザー インターフェースを提供しません。たとえば、サービスはユーザーが別のアプリを使用している間にバック グラウンドで音楽を再生したり、ユーザーが別のアクティビティを操作している間にそれを妨げることなくネットワークからデータを取得したりします。アクティビティなどの別のコンポーネントは、サービスを開始して実行したり、それをバインドしたりして操作することもできます。

サービスはServiceのサブクラスとして実装されます。詳細については、デベロッパー ガイドのサービスをご覧ください。

### コンテンツ プロバイダ

コンテンツ プロバイダは、共有されているアプリ データを管理します。データは、ファイル システム、SQLiteデータ ベース、ウェブ、アプリがアクセスできる、あらゆる
